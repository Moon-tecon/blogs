{% extends'main/basic.html' %}
{% from 'bootstrap/form.html' import render_form %}
{% from 'macros.html' import file_display with context %}

{% block title %}编辑{{ topic.name }}{% endblock %}

{% block header %}
    <div class="page-header">
        <p><span class="oi oi-home text-muted"></span>
            <a href="{{ url_for('main.index')}}" class="text-dark text-muted">论坛首页</a>&nbsp;&nbsp;
            <small class="oi oi-chevron-left text-muted"></small>&nbsp;
            <a href="{{ url_for('main.show_group', group_id=topic.group_id) }}" class="text-dark text-muted">
                {{ topic.group.name }}</a>&nbsp;&nbsp;
            <small class="oi oi-chevron-left text-muted"></small>&nbsp;
            <a href="{{ url_for('main.show_topic', topic_id=topic.id) }}" class="text-dark text-muted">
                {{ topic.name }}</a>
        </p>
    </div>
{% endblock %}

{% block base_content%}
    <div class="card w-100 bg-light">
        <div class="card-body">
            {{ render_form(form) }}
            {% if topic.files %}
                <div class="border border-light">
                    <h4>附件：</h4>
                    {% for file in topic.files %}
                        {{ file_display(file)}}
                    {% endfor %}
                </div>
            {% endif %}
            <br>
            <a class="btn btn-primary adjunct" href="#!"><span class="oi oi-paperclip"></span> 附件</a>
            <form enctype="multipart/form-data" id="upload-fm" hidden>
                <input type="file" name="file" id="upload_input" value="">
            </form>
            <div class="clear_float"></div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script type="text/javascript" src="{{ url_for('static', filename='ckeditor/ckeditor.js') }}"></script>
{% endblock %}